<!-- _includes/base.html -->





<!-- base is: .. -->
<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="" />

    <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/stylesheet.css">

    <title></title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="">View on GitHub</a>

          <h1 id="project_title"><a href="..">PME</a> @ <a href="http://commonjava.github.io/">Red Hat</a></h1>
          <h2 id="project_tagline">Standardize Your Builds</h2>
        </header>
    </div>
    <div id="navlink_wrap" class="outer">
        
    </div>
    
    <div id="pagetitle_wrap" class="outer">
      <h3 id="pagetitle" class="inner">Project Version Manipulation</h3>
    </div>
    




    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3 id="overview">Overview</h3>

<p>When rebuilding a Maven project&#39;s sources from a release tag (or really for any version that has already been released), it&#39;s important <strong>NOT</strong> to republish the original GAV (groupId, artifactId, version) coordinate. If you change anything during your rebuild (even a plugin version), you could produce a result that is not a binary equivalent of the original release. To help avoid this, PME supports automatically updating the project version to append a serial rebuild suffix. PME&#39;s re-versioning feature may also make other changes to the project version, in order to make the resulting version OSGi-compliant where possible. </p>

<p>PME offers the following version-related configuration:</p>

<h3 id="automatic-version-increment">Automatic version increment</h3>

<p>The extension can be used to append a version suffix/qualifier to the current project, and then apply an incremented index to the version to provide a unique release version.  For example, if the current project version is 1.0.0.GA, the extension can automatically set the version to 1.0.0.GA-rebuild-1, 1.0.0.GA-rebuild-2, etc.</p>

<p>The extension is configured using the property <code>version.incremental.suffix</code>.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">mvn install -Dversion.incremental.suffix=rebuild
</code></pre></div>
<p>The Maven repository metadata will be checked to locate the latest released version of the project artifacts, and the next version is selected by the extension.</p>

<h3 id="manual-version-suffix">Manual version suffix</h3>

<p>The version suffix to be appended to the current project can be manually selected using the property <code>version.suffix</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">mvn install -Dversion.suffix=release-1
</code></pre></div>
<p>If the current version of the project is &quot;1.2.0.GA&quot;, the new version set during the build will be &quot;1.2.0.GA-release-1&quot;.</p>

<h3 id="version-override">Version override</h3>

<p>The version can be forcibly overridden by using the property <code>version.override</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">mvn install -Dversion.override=6.1.0.Final
</code></pre></div>
<p>If the current version of the project is &quot;6.2.0&quot;, the new version set during the build will be &quot;6.1.0.Final&quot;. A combination of properties may be used e.g.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">mvn install -Dversion.override=6.1.0.Final -Dversion.suffix=rebuild-1
</code></pre></div>
<p>Using the above example, this would result in the version being &quot;6.1.0.Final-rebuild-1&quot;.</p>

<h3 id="snapshot-detection">Snapshot Detection</h3>

<p>The extension can detect snapshot versions and either preserve the snapshot or replace it with a real version. This is controlled by the property <code>version.suffix.snapshot</code>. The default is false (i.e. remove SNAPSHOT and replace by the suffix).</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">mvn install -Dversion.suffix.snapshot=true
</code></pre></div>
<p>This means that the SNAPSHOT suffix will be kept.</p>

<h3 id="osgi-compliance">OSGi Compliance</h3>

<p>If version manipulation is enabled the extension will also attempt to format the version to be OSGi compliant. For example if the versions are:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">1
1.3
1.3-GA
1.3.0-GA
</code></pre></div>
<p>it will change to</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">1.0.0
1.3.0
1.3.0.GA
1.3.0.GA
</code></pre></div>
<p>This is controlled by the property <code>version.osgi</code>. The default is true (i.e. make the versions OSGi compliant).</p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">This site is maintained by <a href="mailto:jdcasey@redhat.com">Red Hat</a>.</p>
        <p class="copyright">Its layout is based on the Slate theme by <a href="https://github.com/jasoncostello">Jason Costello</a>.</p>
      </footer>
    </div>

  </body>
</html>

